{% extends "base.html" %}
{% block title %}Painel Kanban{% endblock %}

{% block content %}
<style>
    :root {
        --cor-primaria: #2563EB;
        --cor-secundaria: #6B7280;
        --cor-destaque: #10B981;
        --cor-alerta: #EF4444;
        --cor-fundo: #F9FAFB;
        --texto-principal: #111827;
    }

    body {
        background-color: var(--cor-fundo);
        color: var(--texto-principal);
        margin: 0;
        overflow-x: hidden;
    }

    .kanban-container {
        width: 100%;
        max-width: 100%;
        margin: 0;
        padding: 2rem;
        box-sizing: border-box;
    }

    .kanban-board {
        display: flex;
        justify-content: space-between;
        gap: 1rem;
        flex-wrap: wrap;
    }

    .kanban-column {
        flex: 1;
        min-width: 280px;
        border: 1px solid var(--cor-secundaria);
        border-radius: 8px;
        padding: 10px;
        background-color: var(--cor-fundo);
        min-height: 300px;
        transition: background-color 0.3s ease;
        box-sizing: border-box;
    }

    .kanban-column h5 {
        text-align: center;
        margin-bottom: 1rem;
        color: var(--texto-principal);
    }

    .kanban-column.drag-over {
        background-color: #e2e6ea;
    }

    .task-card {
        border-left: 6px solid transparent;
        border-radius: 5px;
        padding: 8px 8px 8px 12px;
        margin-bottom: 10px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        cursor: grab;
        transition: transform 0.2s ease, opacity 0.2s ease;
        background-color: white;
        box-sizing: border-box;
    }

    .task-card.pendente {
        background-color: #f1f1f1;
        border-left-color: var(--cor-secundaria);
    }

    .task-card.em_progresso {
        background-color: #fff3cd;
        border-left-color: var(--cor-primaria);
    }

    .task-card.concluÃ­da {
        background-color: #d1fae5;
        border-left-color: var(--cor-destaque);
        cursor: default;
    }

    .task-card.atrasada {
        border-left-color: var(--cor-alerta) !important;
        background-color: #fee2e2 !important;
    }

    h2 {
        color: var(--texto-principal);
    }

    .btn-primary {
        background-color: var(--cor-primaria);
        border-color: var(--cor-primaria);
        color: white;
    }

    .btn-primary:hover {
        background-color: #1d4ed8;
        border-color: #1d4ed8;
    }

    .btn-success {
        background-color: var(--cor-destaque);
        border-color: var(--cor-destaque);
        color: white;
    }

    .btn-danger {
        background-color: var(--cor-alerta);
        border-color: var(--cor-alerta);
        color: white;
    }

    .btn-link {
        color: var(--cor-primaria);
    }
</style>

<div class="kanban-container">
    <h2 class="mb-4">TAREFAS</h2>

    <div class="mb-3 d-flex gap-2 align-items-center flex-wrap">
        <label for="start-date" class="form-label mb-0">InÃ­cio:</label>
        <input type="date" id="start-date" class="form-control border-secondary" />
        <label for="end-date" class="form-label mb-0">Fim:</label>
        <input type="date" id="end-date" class="form-control border-secondary" />
        <button class="btn btn-primary" onclick="carregarTarefas(true)">Filtrar</button>
    </div>

    <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 9999">
        <div id="toast-status" class="toast align-items-center text-white bg-success border-0" role="alert">
            <div class="d-flex">
                <div class="toast-body" id="toast-body">AÃ§Ã£o realizada!</div>
                <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
            </div>
        </div>
    </div>

    <div class="kanban-board">
        <div class="kanban-column" id="pendente">
            <h5>ðŸ•’ Pendente</h5>
        </div>
        <div class="kanban-column" id="em_progresso">
            <h5>ðŸ”„ Em Progresso</h5>
        </div>
        <div class="kanban-column" id="concluÃ­da">
            <h5>âœ… ConcluÃ­da</h5>
            <div id="concluidas-tarefas"></div>
            <button id="carregar-mais-btn" class="btn btn-link" style="display:none;">Carregar mais</button>
        </div>
    </div>
</div>

<script>
    // ... todo o JS permanece o mesmo ...
</script>
{% endblock %}